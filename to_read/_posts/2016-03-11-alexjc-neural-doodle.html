---
title: "alexjc/neural-doodle"
description: "neural-doodle - Turn your two-bit doodles into fine artworks with deep neural networks! An implementation of Semantic Style Transfer."
link: "https://github.com/alexjc/neural-doodle"
saved: "2016-03-11 15:18:35"
---
<a name="user-content-neural-doodle"></a>
<h2><a id="user-content-neural-doodle" class="anchor" href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#neural-doodle" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>Neural Doodle</h2>
<a href="https://github.com/alexjc/neural-doodle/blob/master/docs/Workflow.gif" target="_blank"><img alt="docs/Workflow.gif" src="https://github.com/alexjc/neural-doodle/raw/master/docs/Workflow.gif"></a>
<p>Use a deep neural network to borrow the skills of real artists and turn your two-bit doodles into masterpieces! This project is an implementation of <a href="http://arxiv.org/abs/1603.01768">Semantic Style Transfer</a> (Champandard, 2016), based on the <a href="http://arxiv.org/abs/1601.04589">Neural Patches</a> algorithm (Li, 2016).</p>
<p>The <code>doodle.py</code> script generates an image by using three or four images as inputs: the original style and its annotation, and a target content image (optional) with its annotation (a.k.a. your doodle). The algorithm then extracts annotated patches from the style image, and incrementally transfers them over to the target image based on how closely they match.</p>
<ol>
<li><a href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#examples--usage">Examples &amp; Usage</a></li>
<li><a href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#installation-setup">Installation</a></li>
<li><a href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#troubleshooting-problems">Troubleshooting</a></li>
<li><a href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#frequent-questions">Frequent Questions</a></li>
</ol>
<p><strong>NOTE</strong>: This project is possible thanks to the <a href="http://nucl.ai/">nucl.ai Conference</a> on <strong>July 18-20</strong>. Join us in <strong>Vienna</strong>!</p>
<p><a href="https://www.python.org/"><img alt="Python Version" src="https://camo.githubusercontent.com/946346eaae6f84a766cb0b738eec883340ec6c33/687474703a2f2f616967616d656465762e6769746875622e696f2f7363696b69742d6e657572616c6e6574776f726b2f62616467655f707974686f6e2e737667" data-canonical-src="http://aigamedev.github.io/scikit-neuralnetwork/badge_python.svg">
</a> <a href="https://github.com/alexjc/neural-doodle/blob/master/LICENSE"><img alt="License Type" src="https://camo.githubusercontent.com/d14700b6670c55e314ff159278e436141bd620da/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4e65772532304253442d626c75652e737667" data-canonical-src="https://img.shields.io/badge/license-New%20BSD-blue.svg">
</a> <a href="https://github.com/alexjc/neural-doodle/stargazers"><img alt="Project Stars" src="https://camo.githubusercontent.com/745db0b534b981d4e52e44c9601c008323c7403a/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f616c65786a632f6e657572616c2d646f6f646c652e7376673f7374796c653d666c6174" data-canonical-src="https://img.shields.io/github/stars/alexjc/neural-doodle.svg?style=flat"></a></p>
<hr>
<a href="https://github.com/alexjc/neural-doodle/blob/master/docs/Landscape_example.png" target="_blank"><img alt="docs/Landscape_example.png" src="https://github.com/alexjc/neural-doodle/raw/master/docs/Landscape_example.png"></a>
<a name="user-content-id1"></a>
<h2><a id="user-content-examples--usage" class="anchor" href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#examples--usage" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>Examples &amp; Usage</h2>
<h2 id="user-content-image-analogy"><a id="user-content-image-analogy" class="anchor" href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#image-analogy" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>Image Analogy</h2>
<p>The algorithm is built for style transfer, but can also generate image analogies that we call a <code>#NeuralDoodle</code>; use the hashtag if you post your images!  Example files are included in the <code>#/samples/</code> folder. Execute with these commands:</p>
<div class="highlight highlight-source-shell"><pre><span class="pl-c"># Synthesize a coastline as if painted by Monet. This uses "*_sem.png" masks for both images.</span>
python3 doodle.py --style samples/Monet.jpg --output samples/Coastline.png \
                  --device=cpu --iterations=40

<span class="pl-c"># Generate a scene around a lake in the style of a Renoir painting.</span>
python3 doodle.py --style samples/Renoir.jpg --output samples/Landscape.png \
                  --device=gpu0 --iterations=80</pre></div>
<p>Note the <code>--device</code> argument that lets you specify which GPU or CPU to use. For the samples above, here are the performance results:</p>
<ul>
<li><strong>GPU Rendering</strong> — Assuming you have CUDA and enough on-board RAM, the process should complete in less than 10 minutes, even with twice the iterations.</li>
<li><strong>CPU Rendering</strong> — This will take hours and hours, even up to 12h on older hardware. To match quality it'd take twice the time. Do multiple runs in parallel!</li>
</ul>
<p>The default is to use <code>cpu</code>, if you have NVIDIA card setup with CUDA already try <code>gpu0</code>. On the CPU, you can also set environment variable to <code>OMP_NUM_THREADS=4</code>, but we've found the speed improvements to be minimal.</p>
<a name="user-content-installation-setup"></a>
<h2><a id="user-content-installation--setup" class="anchor" href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#installation--setup" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>Installation &amp; Setup</h2>
<p>This project requires Python 3.4+ and you'll also need <code>numpy</code> and <code>scipy</code> (numerical computing libraries) as well as <code>python3-dev</code> installed system-wide. Afterward fetching the repository, you can run the following commands from your terminal to setup a local environment:</p>
<div class="highlight highlight-source-shell"><pre><span class="pl-c"># Create a local environment for Python 3.x to install dependencies here.</span>
python3 -m venv pyvenv --system-site-packages

<span class="pl-c"># If you're using bash, make this the active version of Python.</span>
<span class="pl-c1">source</span> pyvenv/bin/activate

<span class="pl-c"># Setup the required dependencies simply using the PIP module.</span>
python3 -m pip install --ignore-installed -r requirements.txt</pre></div>
<p>After this, you should have <code>scikit-image</code>, <code>theano</code> and <code>lasagne</code> installed in your virtual environment.  You'll also need to download this <a href="https://github.com/alexjc/neural-doodle/releases/download/v0.0/vgg19_conv.pkl.bz2">pre-trained neural network</a> (VGG19, 80Mb) for the script to run. Once you're done you can just delete the <code>#/pyvenv/</code> folder.</p>
<a href="https://github.com/alexjc/neural-doodle/blob/master/docs/Coastline_example.png" target="_blank"><img alt="docs/Coastline_example.png" src="https://github.com/alexjc/neural-doodle/raw/master/docs/Coastline_example.png"></a>
<a name="user-content-troubleshooting-problems"></a>
<h2><a id="user-content-troubleshooting-problems" class="anchor" href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#troubleshooting-problems" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>Troubleshooting Problems</h2>
<a name="user-content-it-s-running-out-of-gpu-ram-throwing-memoryerror-help"></a>
<h3><a id="user-content-its-running-out-of-gpu-ram-throwing-memoryerror-help" class="anchor" href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#its-running-out-of-gpu-ram-throwing-memoryerror-help" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>It's running out of GPU Ram, throwing <code>MemoryError</code>. Help!</h3>
<p>You'll need a good NVIDIA card with CUDA to run this software on GPU, ideally 2Gb / 4Gb or better still, 8Gb to 12Gb for larger resolutions.  The code does work on CPU by default, so use that as fallback since you likely have more system RAM!</p>
<p>To improve memory consumption, you can also install NVIDIA's <code>cudnn</code> library version 3.0 or 4.0. This allows convolutional neural networks to run faster and save space in GPU RAM.</p>
<p><strong>FIX</strong> Use <code>--device=cpu</code> to use main system memory.</p>
<a name="user-content-notimplementederror-abstractconv2d-theano-optimization-failed"></a>
<h3><a id="user-content-notimplementederror-abstractconv2d-theano-optimization-failed" class="anchor" href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#notimplementederror-abstractconv2d-theano-optimization-failed" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>NotImplementedError: AbstractConv2d theano optimization failed.</h3>
<p>This happens when you're running without a GPU, and the CPU libraries were not found (e.g. <code>libblas</code>).  The neural network expressions cannot be evaluated by Theano and it's raising an exception.</p>
<p><strong>FIX</strong> <code>sudo apt-get install libblas-dev libopenblas-dev</code></p>
<a name="user-content-typeerror-max-pool-2d-got-an-unexpected-keyword-argument-mode"></a>
<h3><a id="user-content-typeerror-max_pool_2d-got-an-unexpected-keyword-argument-mode" class="anchor" href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#typeerror-max_pool_2d-got-an-unexpected-keyword-argument-mode" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>TypeError: max_pool_2d() got an unexpected keyword argument 'mode'</h3>
<p>You need to install Lasagne and Theano directly from the versions specified in <code>requirements.txt</code>, rather than from the PIP versions.  These alternatives are older and don't have the required features.</p>
<p><strong>FIX</strong> <code>python3 -m pip install -r requirements.txt</code></p>
<a name="user-content-valueerror-unknown-locale-utf-8"></a>
<h3><a id="user-content-valueerror-unknown-locale-utf-8" class="anchor" href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#valueerror-unknown-locale-utf-8" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>ValueError: unknown locale: UTF-8</h3>
<p>It seems your terminal is misconfigured and not compatible with the way Python treats locales. You may need to change this in your <code>.bash_rc</code> or other startup script. Alternatively, this command will fix it once for this shell instance.</p>
<p><strong>FIX</strong> <code>export LC_ALL=en_US.UTF-8</code></p>
<a name="user-content-error-the-optimization-diverged-and-nan-numbers-were-encountered"></a>
<h3><a id="user-content-error-the-optimization-diverged-and-nan-numbers-were-encountered" class="anchor" href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#error-the-optimization-diverged-and-nan-numbers-were-encountered" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>ERROR: The optimization diverged and NaN numbers were encountered.</h3>
<p>It's possible there's a platform bug in the underlying libraries or compiler, which has been reported on MacOS El Capitan.  It's not clear how to fix it, but you can try to disable optimizations to prevent the bug. (See <a href="https://github.com/alexjc/neural-doodle/issues/8">Issue #8</a>.)</p>
<p><strong>FIX</strong> Use <code>--safe-mode</code> flag to disable optimizations.</p>
<a name="user-content-id2"></a>
<h2><a id="user-content-frequent-questions" class="anchor" href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#frequent-questions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>Frequent Questions</h2>
<h2 id="user-content-q-how-is-semantic-style-transfer-different-to-neural-analogies"><a id="user-content-q-how-is-semantic-style-transfer-different-to-neural-analogies" class="anchor" href="https://github.com/alexjc/neural-doodle?utm_source=SitePoint&amp;utm_medium=email&amp;utm_campaign=Versioning#q-how-is-semantic-style-transfer-different-to-neural-analogies" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>Q: How is semantic style transfer different to neural analogies?</h2>
<p>It's still too early to say definitively, both approaches were discovered independently in 2016 by <a href="https://twitter.com/alexjc">@alexjc</a> and <a href="https://twitter.com/awentzonline">@awentzonline</a> (respectively). Here are some early impressions:</p>
<ol>
<li>One algorithm is style transfer that happens to do analogies, and the other is analogies that happens to do style transfer now. Adam extended his implementation to use a content loss after the <a href="http://arxiv.org/abs/1603.01768">Semantic Style Transfer</a> paper was published, so now they're even more similar under the hood!</li>
<li>Both use a <a href="http://arxiv.org/abs/1601.04589">patch-based approach</a> (Li, 2016) but semantic style transfer imposes a "prior" via the patch-selection process and neural analogies has an additional prior on the convolution activations.  The outputs for both algorithms are a little different, it's not yet clear where each one is best.</li>
<li>Semantic style transfer is simpler, it has fewer loss components.  This means somewhat less code to write and there are <strong>fewer parameters involved</strong> (not necessarily positive or negative).  Neural analogies is a little more complex, with as many parameters as the combination of two algorithms.</li>
<li>Neural analogies is designed to work with images, and can only support the RGB format for its masks. Semantic style transfer was designed to <strong>integrate with other neural networks</strong> (for pixel labeling and semantic segmentation), and can use any format for its maps, including RGBA or many channels per label masks.</li>
<li>Semantic style transfer is <strong>about 25% faster and uses less memory</strong> too.  For neural analogies, the extra computation is effectively the analogy prior — which could improve the quality of the results in theory. In practice, it's hard to tell at this stage and more testing is needed.</li>
</ol>
<p>If you have any comparisons or insights, be sure to let us know!</p>
<hr>
<p><a href="https://www.python.org/"><img alt="Python Version" src="https://camo.githubusercontent.com/946346eaae6f84a766cb0b738eec883340ec6c33/687474703a2f2f616967616d656465762e6769746875622e696f2f7363696b69742d6e657572616c6e6574776f726b2f62616467655f707974686f6e2e737667" data-canonical-src="http://aigamedev.github.io/scikit-neuralnetwork/badge_python.svg">
</a> <a href="https://github.com/alexjc/neural-doodle/blob/master/LICENSE"><img alt="License Type" src="https://camo.githubusercontent.com/d14700b6670c55e314ff159278e436141bd620da/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4e65772532304253442d626c75652e737667" data-canonical-src="https://img.shields.io/badge/license-New%20BSD-blue.svg">
</a> <a href="https://github.com/alexjc/neural-doodle/stargazers"><img alt="Project Stars" src="https://camo.githubusercontent.com/745db0b534b981d4e52e44c9601c008323c7403a/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f616c65786a632f6e657572616c2d646f6f646c652e7376673f7374796c653d666c6174" data-canonical-src="https://img.shields.io/github/stars/alexjc/neural-doodle.svg?style=flat"></a></p>

