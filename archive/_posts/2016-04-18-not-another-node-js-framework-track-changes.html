---
title: "Not another Node.js framework… — Track Changes"
description: "A few years ago I was working for a very lean web start up. The team consisted of myself and my father and neither of us…"
link: "https://trackchanges.postlight.com/not-another-node-js-framework-33103ebeedf8#.yj7cv2ecz"
saved: "2016-04-18 15:55:17"
---
<section name="a01e" class=" section--body section--first"><div class="section-divider layoutSingleColumn"><hr class="section-divider"></div><div class="section-content"><div class="section-inner layoutSingleColumn"><h3 name="7653" id="7653" class="graf--h3 graf--first">Not another Node.js framework…</h3><figure name="fee0" id="fee0" class="graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded is-imageLoaded" data-image-id="1*WtyrTev0LZcuJ5yPfPS_TA.jpeg" data-width="900" data-height="600" data-action="zoom" data-action-value="1*WtyrTev0LZcuJ5yPfPS_TA.jpeg" data-scroll="native"><img src="https://cdn-images-2.medium.com/freeze/max/30/1*WtyrTev0LZcuJ5yPfPS_TA.jpeg?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-2.medium.com/max/800/1*WtyrTev0LZcuJ5yPfPS_TA.jpeg" src="https://cdn-images-2.medium.com/max/800/1*WtyrTev0LZcuJ5yPfPS_TA.jpeg"><noscript class="js-progressiveMedia-inner">&lt;img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-2.medium.com/max/800/1*WtyrTev0LZcuJ5yPfPS_TA.jpeg"&gt;</noscript></div></div><figcaption class="imageCaption">This is a photo of Zachary Golba, not programming</figcaption></figure><p name="7280" id="7280" class="graf--p graf-after--figure">A few years ago I was working for a very lean web start up. The team consisted of myself and my father and neither of us could write code. Sure I dabbled a bit in front-end web development but I barely knew enough to be dangerous. Needless to say the engineering work was outsourced to an agency that took a while to ship something that turned out to be pretty far off from what we were expecting. After a few months of frustration I decided to take matters into my own hands.</p><p name="1048" id="1048" class="graf--p graf-after--p">I took a month off from work (as I knew it) and began to learn the Ruby programming language through a series of online tutorials, trial, and error. Two weeks into my journey I decided to create a prototype of our product using <a href="http://rubyonrails.org/" data-href="http://rubyonrails.org/" class="markup--anchor markup--p-anchor">Ruby on Rails</a>. After a few sleepless nights we ended up with a working beta deployed to AWS.</p><p name="ea99" id="ea99" class="graf--p graf-after--p">It was time to solve the more difficult problems such as Facebook-style notifications and a front-end that felt like an app rather than a static page. I began to explore the wonderful world of JavaScript. <a href="http://emberjs.com/" data-href="http://emberjs.com/" class="markup--anchor markup--p-anchor">Ember.js</a> and <a href="http://ember-cli.com/" data-href="http://ember-cli.com/" class="markup--anchor markup--p-anchor">Ember-CLI</a> allowed me to build the front-end as fast as <a href="http://rubyonrails.org/" data-href="http://rubyonrails.org/" class="markup--anchor markup--p-anchor">Rails</a> allowed me to build the back-end. I was right at home. So happy with the progress we were making, I nearly got the saying “convention over configuration” tattooed on my back. Ok now just one last feature to check off the list. Realtime notifications.</p><p name="ce35" id="ce35" class="graf--p graf-after--p">After some research I decided to go with a <a href="http://redis.io/" data-href="http://redis.io/" class="markup--anchor markup--p-anchor">Redis</a> pub-sub system with <a href="https://nodejs.org/en/" data-href="https://nodejs.org/en/" class="markup--anchor markup--p-anchor">Node.js</a>, <a href="http://expressjs.com/" data-href="http://expressjs.com/" class="markup--anchor markup--p-anchor">Express</a>, and <a href="http://socket.io/" data-href="http://socket.io/" class="markup--anchor markup--p-anchor">Socket.io</a>. I quickly realized this was much more difficult then typing `rails new`. It felt like eternity to build out a single feature in comparison to the rest of the application. Even though this took longer than I expected, I still found myself falling in love with <a href="https://nodejs.org/en/" data-href="https://nodejs.org/en/" class="markup--anchor markup--p-anchor">Node.js</a>. Sure it wasn’t as easy as building a <a href="http://rubyonrails.org/" data-href="http://rubyonrails.org/" class="markup--anchor markup--p-anchor">Rails</a> app but the performance was incredible. I began to wonder what if the whole app was built with <a href="https://nodejs.org/en/" data-href="https://nodejs.org/en/" class="markup--anchor markup--p-anchor">Node.js</a>. What would that look like? How long would it take? Would it even be worth it? Rather than getting second system syndrome and slowing down I moved on, knowing I’d like to focus on <a href="https://nodejs.org/en/" data-href="https://nodejs.org/en/" class="markup--anchor markup--p-anchor">Node.js</a> again someday.</p><p name="028e" id="028e" class="graf--p graf-after--p">Fast forward to present day. I’m now working for <a href="https://www.postlight.com/" data-href="https://www.postlight.com/" class="markup--anchor markup--p-anchor">Postlight</a>, an agency in New York City that builds web and mobile apps. At <a href="https://www.postlight.com/" data-href="https://www.postlight.com/" class="markup--anchor markup--p-anchor">Postlight</a> I have primarily worked with front-end JavaScript frameworks and libraries like <a href="https://emberjs.com/" data-href="https://emberjs.com" class="markup--anchor markup--p-anchor">Ember.js</a> and <a href="https://facebook.github.io/react/" data-href="https://facebook.github.io/react/" class="markup--anchor markup--p-anchor">React</a>. Doing so has introduced me to ES2015 (ES6) and beyond through <a href="http://babeljs.io/" data-href="http://babeljs.io/" class="markup--anchor markup--p-anchor">Babel</a>. It is amazing to see the amount of progress the JavaScript language has made.</p><p name="794a" id="794a" class="graf--p graf-after--p graf--last">Recently I had the opportunity to work on an open-source project and naturally I followed my pipe dream of a <a href="http://rubyonrails.org/" data-href="http://rubyonrails.org/" class="markup--anchor markup--p-anchor">Rails</a>-esque framework for <a href="https://nodejs.org/en/" data-href="https://nodejs.org/en/" class="markup--anchor markup--p-anchor">Node.js</a>. Granted a few opinionated <a href="https://nodejs.org/en/" data-href="https://nodejs.org/en/" class="markup--anchor markup--p-anchor">Node.js</a> frameworks have popped up over the years but none have satisfied me.</p></div></div></section><section name="1603" class=" section--body section--last"><div class="section-divider layoutSingleColumn"><hr class="section-divider"></div><div class="section-content"><div class="section-inner layoutSingleColumn"><h3 name="91a6" id="91a6" class="graf--h3 graf--first">Introducing Lux</h3><h4 name="36b1" id="36b1" class="graf--h4 graf-after--h3">Opinionated, Modern, and Fast</h4><p name="b8d0" id="b8d0" class="graf--p graf-after--h4"><strong class="markup--strong markup--p-strong">A MVC style framework for building highly performant, large scale JSON APIs that anybody who knows the JavaScript language and its modern features will understand.</strong></p><p name="5a9e" id="5a9e" class="graf--p graf-after--p">Lux doesn’t try to be a one-size-fits-all tool. While some frameworks include the kitchen sink, Lux takes a minimal approach. It includes a small set of tools for constructing a <a href="http://jsonapi.org/" data-href="http://jsonapi.org/" class="markup--anchor markup--p-anchor">JSON API</a>. If you plan on rendering lots of different HTML pages or static assets then Lux is not the right tool for the job. However, if your clients need to consume JSON across multiple platforms such as iOS, Android, or a JavaScript application in a web browser you’re in luck. Lux formats responses to the <a href="http://jsonapi.org/" data-href="http://jsonapi.org/" class="markup--anchor markup--p-anchor">JSON API</a> specification to make requesting and consuming data a breeze for your clients.</p><p name="9b7f" id="9b7f" class="graf--p graf-after--p">One of the core principles of Lux is to not reinvent the wheel and use the JavaScript language’s standard library rather than creating abstractions that you’ll have to learn. This aspect of Lux is heavily inspired by <a href="https://facebook.github.io/react/" data-href="https://facebook.github.io/react/" class="markup--anchor markup--p-anchor">React</a> and the concept of <a href="http://2014.jsconf.eu/speakers/sebastian-markbage-minimal-api-surface-area-learning-patterns-instead-of-frameworks.html" data-href="http://2014.jsconf.eu/speakers/sebastian-markbage-minimal-api-surface-area-learning-patterns-instead-of-frameworks.html" class="markup--anchor markup--p-anchor">Minimal API Surface Area</a>. The public Lux API consists of 4 ES2015 classes (Model, Controller, Serializer, Application) and an ES2016 decorator for declaring custom actions in a Controller.</p><p name="4454" id="4454" class="graf--p graf-after--p">Here’s an example of what a Controller looks like:</p><figure name="9a2a" id="9a2a" class="graf--figure graf--iframe graf-after--p"><div class="iframeContainer"><iframe width="700" height="250" src="https://trackchanges.postlight.com/media/b9edb82542b178278ffa5dc8bee2b6dc?maxWidth=700" data-media-id="b9edb82542b178278ffa5dc8bee2b6dc" frameborder="0"></iframe></div></figure><p name="5c09" id="5c09" class="graf--p graf-after--figure">One thing you’ll notice is there are no “actions”. That’s because you get CRUD actions for free by extending the Lux Controller. Built in actions support parameter sanitization, sorting, filtering, and pagination out of the box. If you need to add a custom action then you just write an async function.</p><figure name="bf78" id="bf78" class="graf--figure graf--iframe graf-after--p"><div class="iframeContainer"><iframe width="700" height="250" src="https://trackchanges.postlight.com/media/456a1d7160e44f1c96bc34dd39b72741?maxWidth=700" data-media-id="456a1d7160e44f1c96bc34dd39b72741" frameborder="0"></iframe></div></figure><p name="bd98" id="bd98" class="graf--p graf-after--figure"><em class="markup--em markup--p-em">Wouldn’t it be nice if we could start returning values from functions again?</em></p><p name="c25c" id="c25c" class="graf--p graf-after--p">Lux’s API mirrors the future of the JavaScript language. This makes it easy to use and ultimately easy to hire. Most <a href="https://nodejs.org/en/" data-href="https://nodejs.org/en/" class="markup--anchor markup--p-anchor">Node.js</a> frameworks are barely more friendly than the native <a href="https://nodejs.org/en/" data-href="https://nodejs.org/en/" class="markup--anchor markup--p-anchor">Node.js</a> HTTP server. For a lot of developers that’s what they want and one of the reasons they reach for <a href="https://nodejs.org/en/" data-href="https://nodejs.org/en/" class="markup--anchor markup--p-anchor">Node.js</a>. I’m one of those developers but certainly not all the time. When it comes to building a large API with lots of models, I want some decisions made for me. I’m hoping developers like myself who have a hard deadline and would like to reach for <a href="https://nodejs.org/en/" data-href="https://nodejs.org/en/" class="markup--anchor markup--p-anchor">Node.js</a> but end up going with <a href="http://rubyonrails.org/" data-href="http://rubyonrails.org/" class="markup--anchor markup--p-anchor">Rails</a> API, <a href="http://www.django-rest-framework.org/" data-href="http://www.django-rest-framework.org/" class="markup--anchor markup--p-anchor">Django REST Framework</a>, or something similar can finally have their cake and eat it too.</p><p name="f6c4" id="f6c4" class="graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Performance is an essential part of the psychology behind Lux.</strong> <a href="http://techblog.netflix.com/2014/11/nodejs-in-flames.html" data-href="http://techblog.netflix.com/2014/11/nodejs-in-flames.html" class="markup--anchor markup--p-anchor">Routes are stored and accessed in a Map, not an Array</a>. SQL queries never request more data than they need. Clustering is enabled by default and dynamically configured for the device your application is running on. These small but important details show in this basic <a href="https://github.com/postlight/lux-benchmarks" data-href="https://github.com/postlight/lux-benchmarks" class="markup--anchor markup--p-anchor">benchmark</a>.</p><p name="2e8f" id="2e8f" class="graf--p graf-after--p">The title of this post, <em class="markup--em markup--p-em">Not another Node.js framework, </em>is somewhat of a double entendre. If you look at all the great tools we already have out there for <a href="https://nodejs.org/en/" data-href="https://nodejs.org/en/" class="markup--anchor markup--p-anchor">Node.js</a>, one could easily think “oh no not another”. In reality though, Lux is not anything like what we currently have available. It’s not another <a href="https://nodejs.org/en/" data-href="https://nodejs.org/en/" class="markup--anchor markup--p-anchor">Node.js</a> framework. It’s not meant to replace <a href="http://expressjs.com/" data-href="http://expressjs.com/" class="markup--anchor markup--p-anchor">Express</a>. <a href="http://expressjs.com/" data-href="http://expressjs.com/" class="markup--anchor markup--p-anchor">Express</a> is multi-purpose and un-opinionated. Often times that level of customization is what people are looking for. The same could be said about something like <a href="http://sailsjs.org/" data-href="http://sailsjs.org/" class="markup--anchor markup--p-anchor">Sails</a>, which allows you to serve static assets and dynamic HTML. I believe Lux fills a void in the <a href="https://nodejs.org/en/" data-href="https://nodejs.org/en/" class="markup--anchor markup--p-anchor">Node.js</a> ecosystem and I hope people find a tool like this as useful as I do.</p><p name="4646" id="4646" class="graf--p graf-after--p"><strong class="markup--strong markup--p-strong">The road to 0.0.1</strong></p><p name="27e5" id="27e5" class="graf--p graf-after--p">The core Lux API is reaching stability and includes many of the features that will be available in the first release. We’re sharing it now so that anyone interested can get their hands on it today.</p><p name="77a1" id="77a1" class="graf--p graf-after--p">It will take the support of a strong community for Lux to reach its true potential. If you want to help, feel free to contribute by using Lux for your next project or submitting issues or a pull request on <a href="https://github.com/postlight/lux" data-href="https://github.com/postlight/lux" class="markup--anchor markup--p-anchor">GitHub</a>. The source is roughly 2000 lines of readable JavaScript and I encourage you to <a href="https://github.com/postlight/lux" data-href="https://github.com/postlight/lux" class="markup--anchor markup--p-anchor">check it out for yourself!</a></p><figure name="4b2a" id="4b2a" class="graf--figure graf-after--p graf--last"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill"></div><a href="https://github.com/postlight/lux" data-href="https://github.com/postlight/lux" class="graf-imageAnchor"><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded" data-image-id="1*_0Z_KEvgIzTQy28Dhseg8Q.png" data-width="1474" data-height="404" data-scroll="native"><img src="https://cdn-images-2.medium.com/freeze/max/30/1*_0Z_KEvgIzTQy28Dhseg8Q.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-2.medium.com/max/800/1*_0Z_KEvgIzTQy28Dhseg8Q.png" src="https://cdn-images-2.medium.com/max/800/1*_0Z_KEvgIzTQy28Dhseg8Q.png"><noscript class="js-progressiveMedia-inner">&lt;img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-2.medium.com/max/800/1*_0Z_KEvgIzTQy28Dhseg8Q.png"&gt;</noscript></div></a></div></figure></div></div></section>