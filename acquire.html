---
layout: post
title: Acquire
---
<script>
  var params = location.search.substr(1)
    .split('&')
    .reduce(function(p, e) {
      e = e.split('=');
      p[decodeURIComponent(e[0])] = decodeURIComponent(e[1]);
      return p;
    }, {});

  var origin = params.origin;
  console.log('origin', origin);
  window.addEventListener('message', receiveMessage, false);

  function receiveMessage(e) {
    if (origin.indexOf(e.origin) == -1)
      return;
    var data = e.data;
    if (data) {
      document.querySelector('main').innerText = data.body;
    }
  }

  window.opener.postMessage('loaded', origin);
</script>