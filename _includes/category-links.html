{% assign category_name = 'to_read' %}
{% if include.category_name %}
  {% assign category_name = include.category_name %}
{% endif %}


{% assign time_to_read = 0 %}
{% for page in site.categories[category_name] %}
  {% capture current_time %}{% include reading-time.val %}{% endcapture %}
  {% capture current_time %}{{ current_time | plus: time_to_read }}{% endcapture %}
  {% assign time_to_read = current_time %}
{% endfor %}



<section class="category-links {{ category_name }}" id="{{ category_name }}">
  
  <h1>
    {% include title-case.html title=category_name %}
    <span class="category-meta">
      {{ site.categories[category_name] | size }} links 
      &middot; 
      {{ time_to_read }} min
    </span>
  </h1>

  <div class="links">
  
  {% for page in site.categories[category_name] %}
    {% capture pageyear %}{{ page.date | date: "%Y" }}{% endcapture %}
    {% if pageyear != lastyear %}
      <h2 class="group-year">{{ pageyear }}</h2>
      {% assign lastyear = pageyear %}
    {% endif %}

    
    {% capture pagemonth %}{{ page.date | date: "%Y %B" }}{% endcapture %}
    {% if pagemonth != lastmonth %}
      <h2 class="group-month">{{ pagemonth }}</h2>
      {% assign lastmonth = pagemonth %}
    {% endif %}


    {% capture pagedate %}{{ page.date | date: "%Y %B %d" }}{% endcapture %}
    {% if pagedate != lastdate %}
      <h2 class="group-date">{{ pagedate }}</h2>
      {% assign lastdate = pagedate %}
    {% endif %}


    <a class="link" href="{{ site.baseurl }}{{ page.url }}">
      <h3 class="link-title">{{ page.title }}</h3>
      <p class="link-url">
        <span class="gh-read-time">{% include reading-time.html %}</span>
        &middot;
        {{ page.link }}
      </p>
    </a>

  {% endfor %}
  </div>

</section>