{% assign category_name = 'to_read' %}
{% if include.category_name %}
  {% assign category_name = include.category_name %}
{% endif %}


{% assign time_to_read = 0 %}
{% for post in site.categories[category_name] %}
  {% capture current_time %}{% include functions/reading-time.val %}{% endcapture %}
  {% capture current_time %}{{ current_time | plus: time_to_read }}{% endcapture %}
  {% assign time_to_read = current_time %}
{% endfor %}



<section class="category-links {{ category_name }}" id="{{ category_name }}">
  
  <h1>
    {% include functions/title-case.html text=category_name %}
    <span class="category-meta">
      {{ site.categories[category_name] | size }} links 
      &middot; 
      {{ time_to_read }} min
    </span>
  </h1>

  <div class="links">
  
  {% for post in site.categories[category_name] %}
    {% capture postyear %}{{ post.date | date: "%Y" }}{% endcapture %}
    {% if postyear != lastyear %}
      <h2 class="group-year">{{ postyear }}</h2>
      {% assign lastyear = postyear %}
    {% endif %}

    
    {% capture postmonth %}{{ post.date | date: "%Y %B" }}{% endcapture %}
    {% if postmonth != lastmonth %}
      <h2 class="group-month">{{ postmonth }}</h2>
      {% assign lastmonth = postmonth %}
    {% endif %}


    {% capture postdate %}{{ post.date | date: "%Y %B %d" }}{% endcapture %}
    {% if postdate != lastdate %}
      <h2 class="group-date">{{ postdate }}</h2>
      {% assign lastdate = postdate %}
    {% endif %}


    <a class="link" href="{{ site.baseurl }}{{ post.url }}">
      <h3 class="link-title">{{ post.title }}</h3>
      <p class="link-url">
        <span class="gh-read-time">{% include reading-time.html %}</span>
        &middot;
        {{ post.link }}
      </p>
    </a>

  {% endfor %}
  </div>

</section>